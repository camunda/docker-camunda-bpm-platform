language: generic

sudo: required

services:
    - docker

env:
    - DISTRO=tomcat
    - DISTRO=wildfly10
    - DISTRO=wildfly11

script:
    - docker build -t camunda/camunda-bpm-platform:${DISTRO} --build-arg DISTRO=${DISTRO} .
    - cd test/h2
    - bash ../test-${DISTRO}.sh
    - cd ../postgresql
    - bash ../test-${DISTRO}.sh
    - cd ../mysql
    - bash ../test-${DISTRO}.sh
